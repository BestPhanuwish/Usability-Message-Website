<!DOCTYPE html>

<!--suppress ALL -->
<html lang="zh-hans">


    <head>
        <meta charset="UTF-8">
        <title>
    建议用户中心那边用户名就不要给修改吧
-University-BBS</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="shortcut icon" href="/static/img/favorite.png" type="image/x-icon">
        <link rel="icon" href="/static/img/favorite.png" type="image/x-icon">
        <script src="/static/jquery/jquery-3.5.1.min.js"></script>
        <script src="/static/popper/popper.min.js"></script>
        <link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet"
              href="/static/themes/cyborg.bootstrap.min.css">
        <script src="/static/validator/form-validation.js"></script>
        <script src="/static/js/profile.js"></script>
        <script src="/static/js/base.js"></script>
        <link rel="stylesheet" href="/static/validator/form-validation.css">
        <script src="/static/bootstrap-4.5.3-dist/js/bootstrap.min.js"></script>
        <script src="/static/js/moment-with-locales.min.js"></script>
<script>
moment.locale("en");
function flask_moment_render(elem) {
    timestamp = moment($(elem).data('timestamp'));
    func = $(elem).data('function');
    format = $(elem).data('format');
    timestamp2 = $(elem).data('timestamp2');
    no_suffix = $(elem).data('nosuffix');
    args = [];
    if (format)
        args.push(format);
    if (timestamp2)
        args.push(moment(timestamp2));
    if (no_suffix)
        args.push(no_suffix);
    $(elem).text(timestamp[func].apply(timestamp, args));
    $(elem).removeClass('flask-moment').show();
}
function flask_moment_render_all() {
    $('.flask-moment').each(function() {
        flask_moment_render(this);
        if ($(this).data('refresh')) {
            (function(elem, interval) { setInterval(function() { flask_moment_render(elem) }, interval); })(this, $(this).data('refresh'));
        }
    })
}
$(document).ready(function() {
    flask_moment_render_all();
});
</script>
        <!-- 自定义的css样式 -->
        <link href="/static/css/base.css" rel="stylesheet">

            <link href="/static/css/dark.css" rel="stylesheet">

        <script>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?d6a6dd6a00e6ef410a1c905305fd6af8";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    </head>

    <link href="/ckeditor/static/full/plugins/codesnippet/lib/highlight/styles/docco.css" rel="stylesheet">
<script src="/ckeditor/static/full/plugins/codesnippet/lib/highlight/highlight.pack.js"></script>

            <script>hljs.initHighlightingOnLoad();</script>

        <link href="/static/css/code.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="/static/jquery-toast-plugin-1.3.2/src/jquery.toast.css"/>
<script type="text/javascript" src="/static/jquery-toast-plugin-1.3.2/src/jquery.toast.js"></script>
<script>
    const colors = {
        'success': '#51A351',
        'info': '#2F96B4',
        'warning': '#F89406',
        'danger': '#ff3025',
    };
    function showToast(message, type, duration=3000) {
        $.toast({
            heading: '通知',
            text: message,
            hideAfter: duration,
            allowToastClose: true,
            icon: type,
            bgColor: colors[type],
            position: 'bottom-right',
            showHideTransition: 'slide',
        });
    }
</script>
    <!--suppress ALL -->
    <style>
        #previewHtml {
            height: 210px;
            overflow-y: scroll;
            padding-right: 10px;
        }


        .small-pic {
            height: 30%;
            width: 30%;
        }

        .post-title-h1 {
            font-size: 22px;
            font-weight: bold;
        }

        article > h1 {
            font-size: 20px;
            font-weight: bold;
            margin: 10px 0 10px 0;
            padding: 0 10px;
            border-left: 5px solid #20c997;
            line-height: 2em;
        }

        article > h2 {
            font-size: 18px;
            margin-top: 5px;
            margin-bottom: 5px;
            padding: 5px 5px 5px 5px;
            border-bottom: 1px solid #28a745;
        }

        article > h3 {
            font-size: 18px;
            margin-top: 10px;
            margin-bottom: 10px;
            padding: 5px 5px 5px 5px;
            border-bottom: 1px solid #28a745;
        }

        blockquote > p {
            font: 14px/22px normal helvetica, sans-serif;
            margin: 5px 0px 5px 0px;
            font-style: italic;
        }

        .report-textarea {
            height: 100px !important;
        }

        .preview {
            background: white;
            border-radius: 5px;
            color: black !important;
        }

        .blockquote-comment {
            margin-top: 5px;
            border-left: 6px solid #6c6c6c;
            background: #6c757d;
            color: white;
            padding: 8px;
        }

        .p-error-hint {
            color: #f94b43;
            display: none;
            font-weight: bold;
        }

        .p-info-hint {
            color: #0b75c9;
            display: none;
            font-weight: bold;
        }

        .p-reply {
            color: #80bdff;
            margin-bottom: 0px;
        }

        .div-comment-body {
            padding-bottom: 6px;
        }

        .div-gutter20 {
            height: 20px;
        }

        @media screen and (max-width: 567px) {
            .div-gutter20 {
                height: 5px;
            }
        }

        .hr-margin-5 {
            margin: 5px 0 5px 0 !important;
        }

        .op-badge {
            background-color: #336699;
            border-radius: 5px;
            padding: 3px;
            color: white;
            font-size: 75%;
        }

        .post-audit {
            border: solid 1px #ffb243;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 14px;
            margin-left: 4px;
        }

        .vote-div {
            background: #e3e3e3;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .vote-div .vote-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .vote-div .vote-item {
            background-color: white;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
            position: relative;
        }

        .unvoted-item:hover {
            background-color: #d9d9d9;
        }

        .voted-item {
            background-color: #d9d9d9 !important;
            position: absolute;
            height: 100%;
            z-index: 1;
            top: 0;
            left: 0;
            border-radius: 5px;
        }
    </style>



    <nav class="navbar navbar-expand-lg container" style="flex: none">
        <a class="navbar-brand navbar-text" href="/">

                <img style="height: 60px;width: 80px" src="/static/img/logoko-light.png"
                     alt="">

        </a>
        <button class="navbar-toggler navbar-dark bg-dark"
                type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="collapsibleNavbar">
            <ul class="navbar-nav mr-auto">
            </ul>
            <form class="form-inline my-2 my-md-0" action="/normal/search/">
                <input class="form-control" type="text" name="keyword" placeholder="请输入关键字" aria-label="Search"
                       required>
            </form>

        </div>
    </nav>


    <script>
var locale = window.navigator.userLanguage || window.navigator.language;
moment.locale(locale);
</script>
    <body>
    <main>
        <div class="container mt-2">

            <div id="outerdiv" style="position:fixed;top:0;left:0;background:rgba(0,0,0,0.4);z-index:2;width:100%;height:100%;display:none;">
    <div id="innerdiv" style="position:absolute;">
        <img id="bigimg" style="border:3px solid #fff;border-radius: 3px" src="" />
    </div>
</div>
            <!-- 帖子主要信息 -->
            <ol class="breadcrumb mb-0 rounded-0">
                <li class="breadcrumb-item"><a class="text-decoration-none" href="/">主页</a></li>
                <li class="breadcrumb-item"><a class="text-decoration-none"
                                               href="/post/cate/12/">功能迭代</a>
                </li>
                <li class="breadcrumb-item active d-lg-block d-none">建议用户中心那边用户名就不要给修改吧</li>
            </ol>

            <div class="post-div rounded-0">
                <div class="d-flex align-items-center">
                    <h1 class="post-title-h1 mb-0" id="postTitle" data-id="108">建议用户中心那边用户名就不要给修改吧</h1>

                </div>
                <div class="d-flex mb-0 mt-1">
                    <p class="text-muted mr-2 mb-0"><i class="fa fa-thumbs-o-up mr-1"></i><span
                            class="d-none d-lg-inline-block">点亮</span>(0) </p>
                    <p class="text-muted mr-2 mb-0"><i class="fa fa-thumbs-o-down mr-1"></i><span
                            class="d-none d-lg-inline-block">点灭</span>(0) </p>
                    <p class="text-muted mr-2 mb-0"><i class="fa fa-heart mr-1"></i><span
                            class="d-none d-lg-inline-block">收藏</span>(0) </p>
                    <p class="text-muted mb-0"><i class="fa fa-calendar-minus-o mr-1"></i>2023-03-19 22:39:43</p>

                        <span class="elite-star ml-2" title="精品帖子"><i class="fa fa-star"></i></span>

                </div>

                <div class="d-flex">

                        <img src="/normal/image/avatars/52ef8f39889841849d2161b8a41f8ddc_l.png" class="rounded avatar-50">
                        <div class="d-flex">
                            <div>
                                <a class="ml-2 text-decoration-none"
                                   href="/profile/user/52/">Mutalisk</a>
                                <div class="d-flex">
                                    <a class="text-decoration-none ml-2"><span
                                            class="badge badge-pill badge-success">计算机科学与技术学院</span></a>
                                    <a class="text-decoration-none ml-2"><span
                                            class="badge badge-pill badge-info">学生</span></a>
                                </div>
                            </div>
                        </div>

                </div>
                <div class="mt-2">
                    <article>
                        <p>用户名都能修改，就搞得乱七八糟的了</p>

<p>很多发帖的 @某用户名的 就对不上了</p>

                    </article>


                </div>

            </div>
            <div class="div-gutter20"></div>

            <!-- 评论主要信息 -->

                <div class="post-div">
                    <div class=" mt-2">
                        <div class="d-flex div-comment-body">
                            4条回复 &nbsp;&nbsp; · &nbsp;&nbsp;2024-01-17 17:51:12
                        </div>

                            <div class="div-comment-body mt-2">
                                <!-- 评论用户个人信息 -->
                                <div class="d-flex">
                                    <div class="d-flex">



        <img src="/normal/image/avatars/14a0c76d1717406fa19495e2868cd7a1_l.png" class="rounded avatar-50">

    <div class="d-flex">
        <div>

                <a class="ml-2 text-decoration-none"
                   href="/profile/user/31/">卡拉是条狗🐶</a>

            <div class="d-flex">

                    <a class="text-decoration-none d-lg-block d-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="客户端信息">windows-chrome</span></a>
                    <a class="text-decoration-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="IP属地">湖南省, 长沙市, 岳麓区</span></a>


            </div>
        </div>
    </div>


                                    </div>
                                </div>
                                <!-- 用户评论内容 -->
                                <div class="mt-1 comment-content" id="comContent232">
                                    <div>

                                        <p class="mt-0 mb-0 p-break">恩恩，确实是的，这个确实需要不能修改。<img class="img-emoji" src="/static/emojis/grinning-face_1f600.png" title="grinning-face" alt="grinning-face"></p>
                                    </div>
                                </div>
                                <!-- 对于该评论的操作 -->
                            </div>
                            <div class="comContent232"></div>
                            <div class="d-flex flex-row-reverse mt-1 border-bottom border-dark">

                                <a class="text-decoration-none ml-2 text-muted flex-grow-1 text-left">
                                        <span data-toggle="tooltip" data-placement="right"
                                              data-timestamp="2023-03-19 22:42:43" data-delay="500"
                                              data-original-title=""
                                              title="2023-03-19 22:42:43"><small><span class="flask-moment" data-timestamp="2023-03-19T22:42:43" data-function="fromNow" data-refresh="60000" style="display: none">2023-03-19T22:42:43</span></small></span>
                                </a>
                                <a class="text-decoration-none ml-2 text-muted text-left"
                                   href="#"><small><span>#1</span></small></a>
                            </div>

                            <div class="div-comment-body mt-2">
                                <!-- 评论用户个人信息 -->
                                <div class="d-flex">
                                    <div class="d-flex">



        <img src="/normal/image/avatars/14a0c76d1717406fa19495e2868cd7a1_l.png" class="rounded avatar-50">

    <div class="d-flex">
        <div>

                <a class="ml-2 text-decoration-none"
                   href="/profile/user/31/">卡拉是条狗🐶</a>

            <div class="d-flex">

                    <a class="text-decoration-none d-lg-block d-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="客户端信息">windows-chrome</span></a>
                    <a class="text-decoration-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="IP属地">湖南, 娄底市</span></a>


            </div>
        </div>
    </div>


                                    </div>
                                </div>
                                <!-- 用户评论内容 -->
                                <div class="mt-1 comment-content" id="comContent274">
                                    <div>

                                        <p class="mt-0 mb-0 p-break">还不错哦~</p>
                                    </div>
                                </div>
                                <!-- 对于该评论的操作 -->
                            </div>
                            <div class="comContent274"></div>
                            <div class="d-flex flex-row-reverse mt-1 border-bottom border-dark">

                                <a class="text-decoration-none ml-2 text-muted flex-grow-1 text-left">
                                        <span data-toggle="tooltip" data-placement="right"
                                              data-timestamp="2023-12-28 23:07:51" data-delay="500"
                                              data-original-title=""
                                              title="2023-12-28 23:07:51"><small><span class="flask-moment" data-timestamp="2023-12-28T23:07:51" data-function="fromNow" data-refresh="60000" style="display: none">2023-12-28T23:07:51</span></small></span>
                                </a>
                                <a class="text-decoration-none ml-2 text-muted text-left"
                                   href="#"><small><span>#2</span></small></a>
                            </div>

                            <div class="div-comment-body mt-2">
                                <!-- 评论用户个人信息 -->
                                <div class="d-flex">
                                    <div class="d-flex">



        <img src="/normal/image/avatars/14a0c76d1717406fa19495e2868cd7a1_l.png" class="rounded avatar-50">

    <div class="d-flex">
        <div>

                <a class="ml-2 text-decoration-none"
                   href="/profile/user/31/">卡拉是条狗🐶</a>

            <div class="d-flex">

                    <a class="text-decoration-none d-lg-block d-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="客户端信息">android-chrome</span></a>
                    <a class="text-decoration-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="IP属地">湖南, 长沙</span></a>


            </div>
        </div>
    </div>


                                    </div>
                                </div>
                                <!-- 用户评论内容 -->
                                <div class="mt-1 comment-content" id="comContent275">
                                    <div>

                                        <p class="mt-0 mb-0 p-break">认真真看情变坏</p>
                                    </div>
                                </div>
                                <!-- 对于该评论的操作 -->
                            </div>
                            <div class="comContent275"></div>
                            <div class="d-flex flex-row-reverse mt-1 border-bottom border-dark">

                                <a class="text-decoration-none ml-2 text-muted flex-grow-1 text-left">
                                        <span data-toggle="tooltip" data-placement="right"
                                              data-timestamp="2024-01-06 19:55:50" data-delay="500"
                                              data-original-title=""
                                              title="2024-01-06 19:55:50"><small><span class="flask-moment" data-timestamp="2024-01-06T19:55:50" data-function="fromNow" data-refresh="60000" style="display: none">2024-01-06T19:55:50</span></small></span>
                                </a>
                                <a class="text-decoration-none ml-2 text-muted text-left"
                                   href="#"><small><span>#3</span></small></a>
                            </div>

                            <div class="div-comment-body mt-2">
                                <!-- 评论用户个人信息 -->
                                <div class="d-flex">
                                    <div class="d-flex">



        <img src="/normal/image/avatars/14a0c76d1717406fa19495e2868cd7a1_l.png" class="rounded avatar-50">

    <div class="d-flex">
        <div>

                <a class="ml-2 text-decoration-none"
                   href="/profile/user/31/">卡拉是条狗🐶</a>

            <div class="d-flex">

                    <a class="text-decoration-none d-lg-block d-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="客户端信息">android-chrome</span></a>
                    <a class="text-decoration-none ml-2"><span
                            class="client-badge span-hand" data-toggle="tooltip" data-placement="bottom"
                            title="IP属地">湖南, 长沙</span></a>


            </div>
        </div>
    </div>


                                    </div>
                                </div>
                                <!-- 用户评论内容 -->
                                <div class="mt-1 comment-content" id="comContent277">
                                    <div>

                                        <p class="mt-0 mb-0 p-break">人生到处知何似，应似飞鸿踏雪泥。</p>
                                    </div>
                                </div>
                                <!-- 对于该评论的操作 -->
                            </div>
                            <div class="comContent277"></div>
                            <div class="d-flex flex-row-reverse mt-1 border-bottom border-dark">

                                <a class="text-decoration-none ml-2 text-muted flex-grow-1 text-left">
                                        <span data-toggle="tooltip" data-placement="right"
                                              data-timestamp="2024-01-17 17:51:12" data-delay="500"
                                              data-original-title=""
                                              title="2024-01-17 17:51:12"><small><span class="flask-moment" data-timestamp="2024-01-17T17:51:12" data-function="fromNow" data-refresh="60000" style="display: none">2024-01-17T17:51:12</span></small></span>
                                </a>
                                <a class="text-decoration-none ml-2 text-muted text-left"
                                   href="#"><small><span>#4</span></small></a>
                            </div>


                    </div>
                </div>
                <div class="div-gutter20"></div>


            <!-- 评论框 -->
            <div class="post-div post-comment">
                <p id="commentPosition"></p>

                    <div class="text-center">
                        <div class="card-body text-center m-2 m-md-3 f-16" id="no-editor">
                            <div>您尚未登录，
                                <a href="/auth/login/"><span class="badge badge-info">登录</span></a> 或
                                <a href="/auth/register/"><span class="badge badge-success">注册</span></a> 后评论
                            </div>
                        </div>
                    </div>

            </div>
        </div>
        <!-- 举报内容填写模态框 -->

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">举报帖子</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/post/report/" method="post">
                        <input value="108" name="postId" hidden="hidden">
                        <div class="form-group">
                            <label>举报类型</label>
                            <select name="reportCate" class="form-control">
                                <option>违反法律、时政敏感</option>
                                <option>色情淫秽、血腥暴恐</option>
                                <option>未经许可的广告行为</option>
                                <option>低俗谩骂、攻击引战</option>
                                <option>造谣毁谤</option>
                                <option>其他违反版规内容</option>
                            </select>
                            <label for="reportReason">举报理由</label>
                            <textarea required class="form-control report-textarea" id="reportReason"
                                      name="reportReason" placeholder="请输入举报理由"></textarea>
                        </div>
                        <div class="text-right">
                            <input type="submit" class="btn btn-outline-danger">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="markdownHelp" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Markdown语法帮助</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    可能有些同学对Markdown语法不是很了解,下面是一些简单的语法介绍!你们也可以访问这个<a
                        href="https://www.runoob.com/markdown/md-tutorial.html" class="text-decoration-none"
                        target="_blank">链接</a>学习怎么使用Markdown语法!
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">类型</th>
                            <th scope="col">语法</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="table-secondary">
                            <td>标题</td>
                            <td># H1 ## H2 ### H3</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>粗体</td>
                            <td>**bold**</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>无序表</td>
                            <td>* a</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>有序表</td>
                            <td>1. a</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>引用</td>
                            <td>> 引用内容</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>链接</td>
                            <td>[title](http://...)</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>图片</td>
                            <td>![alt](http://...)</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>代码</td>
                            <td>`code`</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>换行</td>
                            <td>&lt;br&gt;</td>
                        </tr>
                        <tr class="table-secondary">
                            <td>代码片段</td>
                            <td>```python <br>
                                def test():<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;print('Hello world!')<br>
                                ```
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalLabel">确认?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <p>确定删除该条评论吗?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">取消</button>
                    <button class="btn btn-danger btn-confirm" id="deleteBtn" onclick="submitDelete($(this).val())">删除
                    </button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="edit-comment" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">编辑评论</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-pills " role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="pill" href="#editComments"><i
                                    class="fa fa-commenting mr-2"></i>评论</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link"
                               onclick="getMarkDownData('editCommentContent', 'editCommentPreviewContent')"
                               data-toggle="pill"
                               href="#editCommentPreview"><i class="fa fa-print mr-2"></i>预览</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="editComments" class="tab-pane active div-300">
                            <textarea class="form-control mt-2" rows="13" id="editCommentContent"></textarea>
                        </div>
                        <div id="editCommentPreview" class="tab-pane fade div-300">
                            <div class="mt-2" id="editCommentPreviewContent"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">取消</button>
                    <button class="btn btn-danger btn-confirm" id="deleteBtn" onclick="saveEditComment()">保存
                    </button>
                </div>
            </div>
        </div>
    </div>

        <script>
            let editCommentId = null
            $(document).ready(function () {

            })
            window.onload = function () {
                let ccs = document.getElementsByClassName('comment-content')
                let height = $(".comment-content").css('max-height')
                if (!height) {
                    return false
                }
                height = parseInt(height.split('px')[0])
                for (let i = 0; i < ccs.length; i++) {
                    if (ccs[i].children[0].scrollHeight > height) {
                        let contentId = ccs[i].id
                        let collapse = $('.' + contentId)
                        collapse.append(`<a class="span-hand text-decoration-none" onclick="collapseComment('${contentId}')">展开</a>`)
                    }
                }
            }

            function collapseComment(contentId) {
                let status = $(`.${contentId}`).children('a').text()
                switch (status) {
                    case "展开":
                        $(`#${contentId}`).removeClass('comment-content')
                        $(`.${contentId}`).children('a').text('折叠')
                        break
                    case "折叠":
                        $(`#${contentId}`).addClass('comment-content')
                        $(`.${contentId}`).children('a').text('展开')
                        break
                }
            }

            function insertMarkdown(type) {
                let obj = document.getElementById('commentContent')
                switch (type) {
                    case "image":
                        insertText(obj, '![alt 属性文本](图片地址)')
                        break
                    case 'link':
                        insertText(obj, '[链接名称](链接地址)')
                        break
                    case 'bold':
                        insertText(obj, '**文本**')
                        break
                    case 'italic':
                        insertText(obj, '*文本*')
                        break
                    case 'h1':
                        insertText(obj, '# ')
                        break
                    case 'h2':
                        insertText(obj, '## ')
                        break
                    case 'h3':
                        insertText(obj, '### ')
                        break
                    case 'code':
                        insertText(obj, '```\ncode\n```')
                        break
                    case 'table':
                        insertText(obj, '|  表头   | 表头  |\n |  ----  | ----  |\n | 单元格  | 单元格 |\n | 单元格  | 单元格 |\n')
                        break
                    case 'list':
                        insertText(obj, '- ')
                        break
                }
            }

            function uploadimg2server(formdata) {
                let infoHint = $("#upload-img-hint")
                infoHint.html('正在上传图片<i class="fa fa-spinner fa-spin"><i>')
                infoHint.slideDown(100);
                $.ajax({
                    url: "/normal/ajax-upload/",
                    type: "post",
                    async: false,
                    data: formdata,
                    processData: false,
                    contentType: false,
                    success: function (res) {
                        insertText(document.getElementById('commentContent'), res.imgPath)
                        infoHint.show().hide(500);
                    },
                    error: function () {
                        infoHint.text('图片上传失败！')
                        infoHint.show().delay(2000).hide(500);
                    }
                })
            }

            // 刷新页面清除保存在sessionStorage中的原始数据
            $(function () {
                sessionStorage.setItem('md', '');
            })

            function cancelReply() {
                $("#commentBtn").removeAttr('hidden');
                $("#replyBtn").attr('hidden', 'hidden');
                $("#cancelReplyBtn").attr('hidden', 'hidden');
                $("#replyUserP").html('');
                $("#replyUserP").attr('hidden', 'hidden');
            }

            function replyComment() {
                let comment = isEmpty();
                if (!comment) {
                    return false;
                }
                let replyBtn = $("#replyBtn")
                let cancelBtn = $("#cancelReplyBtn")
                replyBtn.attr('disabled', 'disabled')
                replyBtn.html('回复<i class="fa fa-pulse fa-spinner"></i>')
                cancelBtn.attr('disabled', 'disabled')
                let commentId = sessionStorage.getItem('commentId');
                let commentUserId = sessionStorage.getItem('commentUserId');
                let postId = $("#postTitle").data('id');
                $.ajax({
                    type: "post",
                    url: "/post/reply-comment/",
                    data: {
                        "post_id": postId,
                        "comment_id": commentId,
                        "comment_user_id": commentUserId,
                        "comment": comment
                    },
                    success: function (res) {
                        if (res.tag === 1) {
                            window.location.reload();
                        } else {
                            replyBtn.removeAttr('disabled')
                            replyBtn.html('评论')
                            cancelBtn.removeAttr('disabled', 'disabled')
                        }
                    },
                    error: function () {
                        replyBtn.removeAttr('disabled')
                        replyBtn.html('回复')
                        cancelBtn.re('disabled')
                        alert('服务器发生错误，回复失败！')
                    }
                })
            }

            function reply(commentId, commentUser, commentUserId) {
                $("#commentBtn").attr('hidden', 'hidden');
                $("#replyBtn").removeAttr('hidden');
                $("#cancelReplyBtn").removeAttr('hidden');
                $("#replyUserP").removeAttr('hidden');
                $("#replyUserP").html('@' + commentUser);
                if (commentUser !== 'Anonymous') {
                    $("#replyUserP").attr('href', '/profile/user/' + commentUserId + '/');
                }
                sessionStorage.setItem('commentId', commentId);
                sessionStorage.setItem('commentUserId', commentUserId);
                $('html,body').animate({scrollTop: $("#commentPosition").offset().top - 100}, 200)
            }

            var emoji_tag = $("#emoji-list img");
            emoji_tag.click(function () {
                var e = $(this).data('emoji');
                $("#commentContent").val($("#commentContent").val() + e);
            });

            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            })

            // 预览评论
            function getMarkDownData(contentId, previewId) {
                let comment = $(`#${contentId}`).val();
                if (comment == '') {
                    $(`#${previewId}`).html('<p class="text-muted"><b>你还没有输入评论!</b></p>')
                    return false;
                }
                let last = sessionStorage.getItem('md');
                // 评论没有修改时,不发送预览请求
                if (last && last === comment) {
                    return false;
                }
                sessionStorage.setItem('md', comment);
                $.ajax({
                    type: "post",
                    url: '/normal/comment/render-md/',
                    data: {'md': comment},
                    success: function (res) {
                        $(`#${previewId}`).html(res.html);
                    }
                })
            }

            function saveEditComment() {
                let content = $("#editCommentContent").val()
                $.ajax({
                    url: '/post/edit-comment',
                    data: {commId: editCommentId, content},
                    method: 'post',
                    success: function (res) {
                        window.location.reload()
                    }
                })
            }

            // 评论框按键监听事件
            function tab(obj) {
                if (event.keyCode == 9) {
                    event.preventDefault();
                    var indent = '    ';
                    var start = obj.selectionStart;
                    var end = obj.selectionEnd;
                    var selected = window.getSelection().toString();
                    selected = indent + selected.replace(/\n/g, '\n' + indent);
                    obj.value = obj.value.substring(0, start) + selected
                        + obj.value.substring(end);
                    obj.setSelectionRange(start + indent.length, start
                        + selected.length);
                }
            }

            function isEmpty() {
                let comment = $("#commentContent").val();
                // 防止一直按回车键输入空白的评论内容
                if (comment.replace(/<br>/g, '').replace(/\s*/g, '') == '') {
                    $(".p-error-hint").slideDown(500);
                    $(".p-error-hint").show().delay(2000).hide(500);
                    return false;
                }
                if (!comment) {
                    $(".p-error-hint").slideDown(500);
                    $(".p-error-hint").show().delay(2000).hide(500);
                    return false;
                }
                return comment;
            }

            // 提交评论
            function postComment() {
                let comment = isEmpty();
                if (!comment) {
                    return false;
                }
                let postId = $("#postTitle").data("id");
                let comBtn = $("#commentBtn")
                comBtn.attr('disabled', 'disabled')
                comBtn.html('评论<i class="fa fa-pulse fa-spinner"></i>')
                $.ajax({
                    type: "post",
                    data: {"commentContent": comment, 'postId': postId},
                    url: "/post/post-comment/",
                    success: function (res) {
                        if (res.tag === 1) {
                            window.location.reload();
                        } else {
                            comBtn.attr('disabled', 'false')
                            comBtn.html('评论')
                        }
                    },
                    error: function () {
                        comBtn.removeAttr('disabled')
                        comBtn.html('评论')
                        alert('服务器发生错误，评论失败！')
                    }
                })
            }

            function submitDelete(commId) {
                $.ajax({
                    url: '/post/delete-comment/',
                    type: 'POST',
                    data: {'comm_id': commId},
                    success: function (res) {
                        if (res.tag) {
                            window.location.reload();
                        } else {
                            alert("删除评论失败!");
                            return false;
                        }
                    },
                    error: function () {
                    }
                })
            }

            $("#confirm-delete").on("show.bs.modal", function (e) {
                let commID = $(e.relatedTarget).data('commid');
                $("#deleteBtn").val(commID);
            })

            $("#edit-comment").on('show.bs.modal', function (e) {
                let commId = $(e.relatedTarget).data('commid')

                if (commId != editCommentId) {
                    editCommentId = commId
                    $.ajax({
                        url: '/post/get-comment',
                        data: {'commId': editCommentId},
                        method: 'post',
                        success: function (res) {
                            $("#editCommentContent").text(res.markdown)
                        }
                    })
                }
            })

            function upload() {
                $("#uploadInput").click();
            }

            function uploadImage() {
                let img = $("#uploadInput")[0].files[0];
                let formdata = new FormData();
                formdata.append('file', img);
                uploadimg2server(formdata)
            }

            // 在textarea中插入上传的图片markdown的值
            function insertText(obj, str) {
                if (document.selection) {
                    var sel = document.selection.createRange();
                    sel.text = str;
                } else if (typeof obj.selectionStart === 'number' && typeof obj.selectionEnd === 'number') {
                    var startPos = obj.selectionStart,
                        endPos = obj.selectionEnd,
                        cursorPos = startPos,
                        tmpStr = obj.value;
                    obj.value = tmpStr.substring(0, startPos) + str + tmpStr.substring(endPos, tmpStr.length);
                    cursorPos += str.length;
                    obj.selectionStart = obj.selectionEnd = cursorPos;
                } else {
                    obj.value += str;
                }
                obj.focus()
            }

            $(".single-vote-item").on('click', function () {
                let voteItemId = $(this).data('vid')
                let voteId = $(this).data('vote')
                console.log({voteId, voteItemId})
                $.ajax({
                    type: "post",
                    data: {voteId, voteItemId},
                    url: "/post/vote",
                    success: function (res) {
                        if (res.code === 403) {
                            // 未登录
                            window.location.href = `/auth/login?next=${window.location.pathname}`
                        }
                        if (res.code === 200) {
                            showToast('投票成功！', 'success')
                            window.location.reload()
                        } else showToast(res.message, 'info')

                    },
                    error: function () {
                        showToast('服务器发生错误，投票失败！', 'error')
                    }
                })
            })

        </script>
    </main>
    </body>


    <footer class="container-fluid mt-4 py-0 bg-footer">
        <div class="card-body text-center px-0 f-14">
            <p class="card-text mb-1">Copyright&nbsp;©&nbsp;<span id='yearInfo'>2020</span>
                <a href="https://bbs.2dogz.cn/" class="text-decoration-none" target="_blank" title="官网">University BBS</a>&nbsp;Design&nbsp;by&nbsp;Flask1.01.
            </p>
	    <p><a href="https://beian.miit.gov.cn/" target="_blank">湘ICP备2020018236号-1</a></p>
        </div>
    </footer>


    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
	function getYear(){
		let year = new Date().getFullYear()
		document.getElementById('yearInfo').innerHTML = year
	}
	getYear()
    </script>

</html>>